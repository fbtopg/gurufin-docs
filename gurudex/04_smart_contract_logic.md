# Smart Contract Logic

GuruDex's swap execution is orchestrated by a modular smart contract system. When a swap is initiated, the **HybridStablePool** queries the **InstitutionalRegistry** to determine user type: retail users are routed to the AMM algorithm (constant product formula with dynamic fees and slippage protection), while institutional users are routed to the oracle algorithm (real-time rates from **PriceOracle** with triple validation for freshness, deviation, and confidence). Institutional onboarding follows a multi-step workflow—registration, off-chain KYC/AML verification, operator activation with custom limits and fees, and coin/pool authorization—before trading is enabled. The **PoolFactory** deploys new HybridStablePool instances as currencies are added, and the **FeeDistributor** handles proportional reward allocation to LP token holders. All contract interactions are designed for idempotency, quorum-based authorization, and deterministic finality via Tendermint BFT.
